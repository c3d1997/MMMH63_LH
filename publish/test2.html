<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>上傳房屋圖片</title>
    <link rel="stylesheet" href="../nav-footer/nav-footer.css">
    <link rel="stylesheet" href="../button-fonts.css">
    <link rel="stylesheet" href="./publish.css">
    <style>
    </style>
</head>
<body>
    <section>
        <div class="z_container ">
            <div class="z_row ">
                <div class="z_publish_container">
                    <div class="z_publish_phone_title">
                        <img src="../imgs/backcolor.svg" alt="">
                        <p>刊登物件</p>
                    </div>
                    <div class="z_step_title bold">step1.　上傳房屋圖片</div>
                    <div class="z_img_reviewcontainer bold">
                        <div class="uploadimg_before">
                            <p>您可以拖拉圖片至此處</p>
                            <div class="z_upload_item_img_btn">
                                <input type="file" accept="image/*" id="mainUpload">
                                <button id="upload_btn"><img src="../imgs/uploadicon.svg" alt="">或是點此上傳</button>
                            </div>
                            <p>提醒您！最多可以上傳10張照片，並且每張照片解析度請至少達到1280*920px</p>
                        </div>
                        <img  alt="" id="nowimg">
                    </div>
                    <div class="z_phone_view">
                        <div class="z_step1imgs_container">
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                            <div class="z_review_card">
                                <button class="z_close_icon"></button>
                                <img  alt="" class="smallimg">
                            </div>
                        </div>
                    </div>
                    <div class="z_publish_phone_tip_container">
                        <p>提醒您！</p>
                        <p>最多可以上傳10張照片，並且每張照片解析度請至少達到1280*920px</p>
                    </div>
                    <button class="pc-button-FEAC00-180 z_publish_btnY z_maxbtn">下一步</button>


                </div>
            </div>
        </div>
    </section>

        <script src="../js/jquery-3.6.0.js"></script>
        <script>
        $("#upload_btn").click(function(){
            $("#mainUpload").click()
        })
        $("#mainUpload").change(function(){
            console.log(this);
            readURL(this);
            $(".uploadimg_before").css("background","#eef1f47c")
        });
        smallcontainer = $(".smallimg")
        console.log((smallcontainer.length)); 
        let i = 0
        function readURL(input){
        //   if(input.files && input.files[0]){
            var reader = new FileReader();
            reader.onload = function (e) {
                $("#nowimg").attr('src', e.target.result);
                if (i<smallcontainer.length) {
                    $(smallcontainer[i]).attr('src', e.target.result);
                }else{
                    i=0;
                    $(smallcontainer[i]).attr('src', e.target.result);
                    console.log("over");
                }
                i++;
                console.log(i);
            }
            console.log(input.files[0])
            reader.readAsDataURL(input.files[0]);
          }
        // }
        $(".z_close_icon").click(function(){
            $(this).next().removeAttr("src")
        })

        const container = $('#nowimg');
        container.on('dragover', function(event){
            event.preventDefault();
        });
        container.on('dragenter', function(event){
            // container.css('background-color','#ffe055');
            $(".z_img_reviewcontainer").css('border','3px solid #ffe055');
        });
        container.on('dragleave', function(event){
            // container.css('background-color','#b0e9ff');
        });
        container.on('drop', function(event){
            // container.css('background-color','#b0e9ff');
            $(".z_img_reviewcontainer").css('border','3px solid #0E2E3D');
            event.preventDefault(); // 避免預設行為
            var reader = new FileReader();
            reader.onload = function (e){
                $("#nowimg").attr('src', e.target.result);
            }
            


        });

        </script>
</body>
</html> 